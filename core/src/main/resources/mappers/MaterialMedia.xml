<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.madhouse.platform.premiummad.dao.MaterialMediaMapper" >
 <resultMap id="UnionResultMap" type="com.madhouse.platform.premiummad.entity.MaterialMediaUnion" >
 	 <!-- 包含DSP定义的素材ID集合 -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="material_id" property="materialId" jdbcType="INTEGER" />
    <result column="media_id" property="mediaId" jdbcType="INTEGER" />
    <result column="material_key" property="materialKey" jdbcType="VARCHAR" />
    <result column="auditee" property="auditee" jdbcType="BIT" />
    <result column="status" property="status" jdbcType="TINYINT" />
    <result column="reason" property="reason" jdbcType="VARCHAR" />
    <result column="created_time" property="createdTime" jdbcType="TIMESTAMP" />
    <result column="audited_user" property="auditedUser" jdbcType="INTEGER" />
    <result column="audited_time" property="auditedTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Union_Column_List" >
  	<!-- 包含DSP定义的素材ID集合 -->
    mm.id, mm.material_id, mm.media_id, mm.auditee, mm.status, mm.reason, 
    mm.created_time, mm.audited_user, mm.audited_time,m.material_key
  </sql>
  <select id="selectMaterialMedias" resultMap="UnionResultMap">
    select 
    <include refid="Union_Column_List" />
    from mad_sys_material_media mm
	left join mad_sys_material m on m.id = mm.material_id
	where m.material_key in
	   <foreach collection="materialKeys" item="materialKey" index="index"
           open="(" close=")" separator=",">
           #{materialKey,jdbcType=VARCHAR}}
        </foreach>
	)
  </select>
</mapper>